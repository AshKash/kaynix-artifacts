"use strict";(self.webpackChunkkaynix_frontend=self.webpackChunkkaynix_frontend||[]).push([[116],{735:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var s=n&&n.prototype instanceof c?n:c,l=Object.create(s.prototype);return u(l,"_invoke",function(r,n,o){var a,c,s,u=0,l=o||[],p=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return a=t,c=0,s=e,f.n=r,i}};function d(r,n){for(c=r,s=n,t=0;!p&&u&&!o&&t<l.length;t++){var o,a=l[t],d=f.p,h=a[2];r>3?(o=h===n)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=r<2&&d<a[1])?(c=0,f.v=n,f.n=a[1]):d<h&&(o=r<3||a[0]>n||n>h)&&(a[4]=r,a[5]=n,f.n=h,c=0))}if(o||r>1)return i;throw p=!0,n}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(p&&1===l&&d(l,h),c=l,s=h;(t=c<2?e:s)||!p;){a||(c?c<3?(c>1&&(f.n=-1),d(c,s)):f.n=s:f.v=s);try{if(u=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(p=f.n<0)?s:r.call(n,f))!==i)break}catch(t){a=e,c=1,s=t}finally{u=1}}return{value:t,done:p}}}(r,o,a),!0),l}var i={};function c(){}function l(){}function p(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(u(t={},n,function(){return this}),t),d=p.prototype=c.prototype=Object.create(f);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=p,u(d,"constructor",p),u(p,"constructor",l),l.displayName="GeneratorFunction",u(p,o,"GeneratorFunction"),u(d),u(d,o,"Generator"),u(d,n,function(){return this}),u(d,"toString",function(){return"[object Generator]"}),(s=function(){return{w:a,m:h}})()}function u(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}u=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var a=function(t,r){u(e,t,function(e){return this._invoke(t,r,e)})};a("next",0),a("throw",1),a("return",2)}},u(e,t,r,n)}function l(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,c,"next",e)}function c(e){l(a,n,o,i,c,"throw",e)}i(void 0)})}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function d(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function h(e,t,r){return t=v(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,r||[],v(e).constructor):t.apply(e,r))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}r.r(t),r.d(t,{default:()=>m});var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,t,["roadrunnersports.com",{productItemSelector:'div[class*="product-card--"]',searchInputSelector:'input[placeholder*="What are you looking for?"]'}])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),r=t,n=[{key:"extractProducts",value:(d=p(s().m(function e(){var t,r,n,o,a,i,c,u,l=this;return s().w(function(e){for(;;)switch(e.n){case 0:if(!window.location.search.includes("r=")){e.n=3;break}return this.log("Filters detected in URL, extracting products from DOM instead of __NEXT_DATA__."),e.p=1,t=document.querySelectorAll(this.config.productItemSelector),r=[],t.forEach(function(e,t){try{var n=e.querySelector('h2, h3, h4, [class*="product-name"], [class*="product-title"]'),o=n?n.textContent.trim():"",a=e.querySelector('[class*="price"], [class*="cost"], span[aria-label*="price"]'),i=null;if(a){var c=a.textContent.trim().match(/[\d,]+\.?\d*/);c&&(i=parseFloat(c[0].replace(/,/g,"")))}var s=e.querySelector("a"),u=s?s.href:"",p=e.querySelector("img"),f=p?p.src:null,d="",h=o.match(/^(Men's |Women's )?([\w\s]+?)\s/);h&&(d=h[2]),o&&r.push({position:t+1,title:o,url:u,image:f,brand:d,price:i,sku:e.getAttribute("data-sku")||""})}catch(y){l.warn("Error extracting product ".concat(t,": ").concat(y.message))}}),this.log("Extracted ".concat(r.length," products from DOM")),e.a(2,{success:!0,products:r});case 2:return e.p=2,c=e.v,this.warn("Error extracting products from DOM: ".concat(c.message)),e.a(2,{success:!1,products:[]});case 3:if(this.log("Extracting products from __NEXT_DATA__."),e.p=4,o=this.getNextData()){e.n=5;break}throw new Error("Could not find or parse __NEXT_DATA__ script tag.");case 5:if((a=null===(n=o.props)||void 0===n||null===(n=n.initialState)||void 0===n||null===(n=n.search)||void 0===n?void 0:n.results)&&Array.isArray(a)){e.n=6;break}return this.warn("Could not find products array in __NEXT_DATA__ at expected path."),e.a(2,{success:!1,products:[]});case 6:return i=a.map(function(e,t){var r,n;return{position:t+1,title:e.name,url:"".concat(window.location.origin).concat(e.url),image:null!==(r=e.colorsSkus)&&void 0!==r&&null!==(r=r[0])&&void 0!==r&&r.imageId?"https://roadrunnersports.widen.net/content/".concat(e.colorsSkus[0].imageId.split(",")[0],"?w=600"):null,brand:e.brand,price:null!==(n=e.price)&&void 0!==n&&null!==(n=n[0])&&void 0!==n&&n.amount?parseFloat(e.price[0].amount):null,sku:e.sku}}),e.a(2,{success:!0,products:i});case 7:return e.p=7,u=e.v,this.warn("Error extracting products from JSON: ".concat(u.message)),e.a(2,{success:!1,products:[]})}},e,this,[[4,7],[1,2]])})),function(){return d.apply(this,arguments)})},{key:"extractAvailableFilters",value:(l=p(s().m(function e(){var t,r,n,i,c,u,l,p,f,d,h,y,v,g,m;return s().w(function(e){for(;;)switch(e.n){case 0:if(this.log("Extracting filters from __NEXT_DATA__."),e.p=1,n=this.getNextData()){e.n=2;break}throw new Error("Could not find or parse __NEXT_DATA__ script tag.");case 2:if(i=null===(t=n.props)||void 0===t||null===(t=t.initialState)||void 0===t||null===(t=t.search)||void 0===t?void 0:t.refinements){e.n=3;break}throw new Error("Could not find filters object in __NEXT_DATA__ at expected path.");case 3:for(c={},u=0,l=Object.entries(i);u<l.length;u++)p=a(l[u],2),f=p[0],d=p[1],Array.isArray(d)&&d.length>0&&(y=this.mapHeaderToGroupName(f),c[y]||(c[y]=[]),v=d.map(function(e){return{label:"".concat(e.name).concat(e.products?" (".concat(e.products,")"):""),value:e.url,count:e.products||null,isChecked:"active"===e.state}}),(h=c[y]).push.apply(h,o(v)));return g=null===(r=n.props)||void 0===r||null===(r=r.initialState)||void 0===r||null===(r=r.search)||void 0===r?void 0:r.sorting,c.sortOptions=[],g&&Array.isArray(g)&&g.forEach(function(e){c.sortOptions.push({label:e.name,value:e.url,isSelected:"active"===e.state})}),e.a(2,c);case 4:return e.p=4,m=e.v,this.warn("Error extracting filters from JSON: ".concat(m.message)),e.a(2,{error:m.message})}},e,this,[[1,4]])})),function(){return l.apply(this,arguments)})},{key:"getNextData",value:function(){var e=document.getElementById("__NEXT_DATA__");if(!e)return null;try{return JSON.parse(e.textContent)}catch(r){return this.warn("Failed to parse __NEXT_DATA__: ".concat(r.message)),null}}},{key:"navigateClientSide",value:(u=p(s().m(function e(t){var r,n,o,a;return s().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,!(r=document.querySelector('a[href="'.concat(t,'"], a[href="').concat(t.replace(window.location.origin,""),'"]')))){e.n=1;break}return this.log("Found existing link for client-side navigation"),r.click(),e.a(2,!0);case 1:return(n=document.createElement("a")).href=t,n.style.display="none",document.body.appendChild(n),o=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}),n.dispatchEvent(o),setTimeout(function(){document.body.removeChild(n)},100),this.log("Attempted client-side navigation via temporary link"),e.a(2,new Promise(function(e){var t=window.location.href;setTimeout(function(){window.location.href!==t?e(!0):e(!1)},50)}));case 2:return e.p=2,a=e.v,this.warn("Client-side navigation failed: ".concat(a.message)),e.a(2,!1)}},e,this,[[0,2]])})),function(e){return u.apply(this,arguments)})},{key:"mapHeaderToGroupName",value:function(e){var t=e.toLowerCase();return t.includes("brand")?"brands":t.includes("color")?"colors":t.includes("shoe size")?"sizes":t.includes("width")?"widths":t.includes("size")?"sizes":t.includes("price")?"priceRanges":t.includes("category")?"categories":t.includes("support")?"supportLevels":t.includes("cushion")?"cushionLevels":t.includes("sale")?"deals":t.includes("new")?"newArrivals":t.includes("outlet")?"outlet":"categories"}},{key:"getMCPCapabilities",value:function(){return{tools:[{name:"search_products",description:"Search for products on Road Runner Sports",inputSchema:{type:"object",properties:{query:{type:"string",description:"Search query for products"}},required:["query"]}},{name:"apply_filters",description:"Apply or clear filters on product results. To clear all filters, pass an empty filters object {}",inputSchema:{type:"object",properties:{filters:{type:"object",description:"Filters to apply (e.g., {brands: ['Brooks'], sizes: ['10'], widths: ['Men's Wide']})",properties:{brands:{type:"array",items:{type:"string"}},sizes:{type:"array",items:{type:"string"}},widths:{type:"array",items:{type:"string"}},colors:{type:"array",items:{type:"string"}},categories:{type:"array",items:{type:"string"}},priceRanges:{type:"array",items:{type:"string"}}}}},required:["filters"]}}]}}},{key:"callMCPTool",value:(c=p(s().m(function e(t,r){var n,a,i,c,u,l,p,f,d,h,y,v,g,m,b,w,_,S,k,A,T,O;return s().w(function(e){for(;;)switch(e.n){case 0:T=t,e.n="search_products"===T?1:"apply_filters"===T?4:15;break;case 1:return n="https://www.roadrunnersports.com/search?q=".concat(encodeURIComponent(r.query)),e.n=2,this.navigateClientSide(n);case 2:if(!e.v){e.n=3;break}return e.a(2,{success:!0,message:'Navigating to search results for "'.concat(r.query,'"'),navigationMethod:"client-side"});case 3:return window.location.href=n,e.a(2,{success:!0,message:'Navigating to search results for "'.concat(r.query,'"'),navigationMethod:"full-reload"});case 4:if(r.filters){e.n=5;break}return e.a(2,{success:!1,error:"No filters provided"});case 5:if(e.p=5,a=r.filters,0!==Object.keys(a).length){e.n=8;break}return i="".concat(window.location.origin,"/category/mens"),this.log("Clearing all filters - navigating to base category"),e.n=6,this.navigateClientSide(i);case 6:if(!e.v){e.n=7;break}return e.a(2,{success:!0,message:"Cleared all filters",navigatedTo:i,action:"clear_filters",navigationMethod:"client-side"});case 7:return window.location.href=i,e.a(2,{success:!0,message:"Cleared all filters",navigatedTo:i,action:"clear_filters",navigationMethod:"full-reload"});case 8:return e.n=9,this.extractAvailableFilters();case 9:if(!(c=e.v).error){e.n=10;break}return e.a(2,{success:!1,error:c.error});case 10:if(u="/category/mens",l=[],p=[],a.brands&&a.brands.length>0&&(f=a.brands[0].toLowerCase(),u+="/".concat(f),p.push("brand: ".concat(a.brands[0]))),a.colors&&a.colors.length>0&&(d=a.colors[0].toLowerCase(),c.colors&&(h=c.colors.find(function(e){return e.label.toLowerCase().includes(d)}))&&h.value&&h.value.startsWith("/")&&(y=h.value.split("/").pop(),u+="/".concat(y),p.push("color: ".concat(a.colors[0])))),a.sizes&&a.sizes.length>0&&a.sizes.forEach(function(e){var t=o(c.sizes||[]).find(function(t){return t.label.startsWith(e+" ")||t.label===e});if(t&&t.value){var r=t.value.match(/[?&](r=[^&]+)/);r&&(l.push(r[1]),p.push("size: ".concat(e)))}}),a.widths&&a.widths.length>0&&a.widths.forEach(function(e){if(c.widths){var t=c.widths.find(function(t){return t.label===e||t.label.includes(e)});if(t&&t.value){var r=t.value.match(/[?&](r=[^&]+)/);r&&(l.push(r[1]),p.push("width: ".concat(e)))}}}),a.priceRanges&&a.priceRanges.length>0&&(v=a.priceRanges[0],(g=v.match(/less\s+than\s+\$?(\d+)/i)||v.match(/under\s+\$?(\d+)/i)||v.match(/<\s*\$?(\d+)/i))?(m=g[1],l.push("r=price%3A%5B0+TO+".concat(m,"%5D")),p.push("price: under $".concat(m))):c.priceRanges&&(b=c.priceRanges.find(function(e){return e.label.toLowerCase().includes(v.toLowerCase())}))&&b.value&&(w=b.value.match(/[?&](r=[^&]+)/))&&(l.push(w[1]),p.push("price: ".concat(b.label)))),a.categories&&a.categories.length>0&&(_=a.categories[0],c.categories&&(S=c.categories.find(function(e){return e.label.toLowerCase().includes(_.toLowerCase())}))&&S.value&&(S.value.startsWith("/")?(u=S.value,p.push("category: ".concat(_))):(k=S.value.match(/[?&](r=[^&]+)/))&&(l.push(k[1]),p.push("category: ".concat(_))))),0!==p.length){e.n=11;break}return e.a(2,{success:!1,error:"No matching filters found for: ".concat(JSON.stringify(a)),availableFilterTypes:Object.keys(c)});case 11:return A="".concat(window.location.origin).concat(u),l.length>0&&(A+="?".concat(l.join("&"),"&p=6")),this.log("Applying ".concat(p.length," filters: ").concat(p.join(", "))),this.log("Navigating to: ".concat(A)),e.n=12,this.navigateClientSide(A);case 12:if(!e.v){e.n=13;break}return e.a(2,{success:!0,message:"Applied filters: ".concat(p.join(", ")),navigatedTo:A,filters_applied:a,appliedFilters:p,navigationMethod:"client-side"});case 13:return window.location.href=A,e.a(2,{success:!0,message:"Applied filters: ".concat(p.join(", ")),navigatedTo:A,filters_applied:a,appliedFilters:p,navigationMethod:"full-reload"});case 14:return e.p=14,O=e.v,e.a(2,{success:!1,error:"Failed to apply filters: ".concat(O.message)});case 15:throw new Error("Unknown MCP tool: ".concat(t));case 16:return e.a(2)}},e,this,[[5,14]])})),function(e,t){return c.apply(this,arguments)})}],n&&f(r.prototype,n),i&&f(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i,c,u,l,d}(r(264).an)}}]);