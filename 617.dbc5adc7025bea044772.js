"use strict";(self.webpackChunkkaynix_frontend=self.webpackChunkkaynix_frontend||[]).push([[617],{617:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var s=n&&n.prototype instanceof c?n:c,l=Object.create(s.prototype);return u(l,"_invoke",function(r,n,o){var a,c,s,u=0,l=o||[],p=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return a=t,c=0,s=e,d.n=r,i}};function f(r,n){for(c=r,s=n,t=0;!p&&u&&!o&&t<l.length;t++){var o,a=l[t],f=d.p,h=a[2];r>3?(o=h===n)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=r<2&&f<a[1])?(c=0,d.v=n,d.n=a[1]):f<h&&(o=r<3||a[0]>n||n>h)&&(a[4]=r,a[5]=n,d.n=h,c=0))}if(o||r>1)return i;throw p=!0,n}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(p&&1===l&&f(l,h),c=l,s=h;(t=c<2?e:s)||!p;){a||(c?c<3?(c>1&&(d.n=-1),f(c,s)):d.n=s:d.v=s);try{if(u=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(p=d.n<0)?s:r.call(n,d))!==i)break}catch(t){a=e,c=1,s=t}finally{u=1}}return{value:t,done:p}}}(r,o,a),!0),l}var i={};function c(){}function l(){}function p(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(u(t={},n,function(){return this}),t),f=p.prototype=c.prototype=Object.create(d);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=p,u(f,"constructor",p),u(p,"constructor",l),l.displayName="GeneratorFunction",u(p,o,"GeneratorFunction"),u(f),u(f,o,"Generator"),u(f,n,function(){return this}),u(f,"toString",function(){return"[object Generator]"}),(s=function(){return{w:a,m:h}})()}function u(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}u=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var a=function(t,r){u(e,t,function(e){return this._invoke(t,r,e)})};a("next",0),a("throw",1),a("return",2)}},u(e,t,r,n)}function l(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,c,"next",e)}function c(e){l(a,n,o,i,c,"throw",e)}i(void 0)})}}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function h(e,t,r){return t=v(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,r||[],v(e).constructor):t.apply(e,r))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}r.r(t),r.d(t,{default:()=>b});var b=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=h(this,t,["online-sports-shop.co.uk",r])).debug=r.debug||!1,e.selectors={filters:{checkboxFilters:{tag:"#Filter-filter.p.tag-64-no-js",availability:"#Filter-filter.v.availability-1",vendor:"#Filter-filter.p.vendor-18-no-js",product_type:"#Filter-filter.p.product_type-mobile-5",size:'input[name="filter.v.option.size"]',color:'input[name="filter.v.option.color"]',price:'input[name="filter.v.price"]'},container:"#FacetsWrapperDesktop",filterContainers:["#FacetsWrapperDesktop","#main-collection-filters",".facets-container"],trigger:".facets__disclosure",priceInputs:{min:'input[name="filter.v.price.gte"]',max:'input[name="filter.v.price.lte"]'}},products:{grid:".section-template--16816211886313__product-grid-padding",item:".product-card-wrapper",title:".card__heading a",price:".price-item",image:".card__media img",link:".card__heading a",soldOut:'[data-sold-out-message="true"]'},search:{form:".search",input:"#Search-In-Modal",button:".reset__button",searchParam:"q"},cart:{addButton:'[data-sold-out-message="true"]',form:'[data-type="add-to-cart-form"]',productIdInput:'input[name="id"]'}},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(t,e),r=t,n=[{key:"search",value:(b=p(s().m(function e(t){var r,n,o,a;return s().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,!this.page){e.n=6;break}return e.n=1,this.page.waitForSelector(this.selectors.search.input,{timeout:5e3});case 1:return e.n=2,this.page.fill(this.selectors.search.input,t);case 2:return e.n=3,this.page.press(this.selectors.search.input,"Enter");case 3:return e.n=4,this.waitForPageLoad();case 4:return e.n=5,this.extractProducts();case 5:return r=e.v,e.a(2,{success:!0,products:r.products||[],query:t});case 6:if(n=document.querySelector(this.selectors.search.input)){e.n=7;break}return e.a(2,{success:!1,products:[],query:t,error:"Search input not found"});case 7:return(o=n.closest("form"))?(n.value=t,o.submit()):window.location.href="/search?".concat(this.selectors.search.searchParam,"=").concat(encodeURIComponent(t)),e.a(2,{success:!0,products:[],query:t});case 8:e.n=10;break;case 9:return e.p=9,a=e.v,e.a(2,{success:!1,products:[],query:t,error:a.message});case 10:return e.a(2)}},e,this,[[0,9]])})),function(e){return b.apply(this,arguments)})},{key:"applyFilters",value:(v=p(s().m(function e(t){var r,n,i,c,u,l,p,d,f,h,y,v,m,b,g,k,w,S,x,_,j,q,O,C,P,F,T,I,E;return s().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,r=t,"string"==typeof t&&(r=this.parseNaturalLanguageFilters(t)),n=[],!this.page){e.n=15;break}i=0,c=Object.entries(r);case 1:if(!(i<c.length)){e.n=12;break}if(u=a(c[i],2),l=u[0],p=u[1],d=this.selectors.filters.checkboxFilters[l]){e.n=2;break}return e.a(3,11);case 2:if("priceMax"!==l&&"priceMin"!==l){e.n=4;break}return f="priceMax"===l?this.selectors.filters.priceInputs.max:this.selectors.filters.priceInputs.min,e.n=3,this.page.fill(f,p.toString());case 3:n.push({type:l,value:p}),e.n=11;break;case 4:return e.n=5,this.page.$("".concat(d,'[value="').concat(p,'"]'));case 5:if(T=e.v){e.n=7;break}return e.n=6,this.page.$("".concat(d,'[value="').concat(p.toUpperCase(),'"]'));case 6:T=e.v;case 7:if(F=T){e.n=9;break}return e.n=8,this.page.$("".concat(d,'[value="').concat(p.toLowerCase(),'"]'));case 8:F=e.v;case 9:if(!(h=F)){e.n=11;break}return e.n=10,h.check();case 10:n.push({type:l,value:p});case 11:i++,e.n=1;break;case 12:return e.n=13,this.waitForPageLoad();case 13:return e.n=14,this.extractProducts();case 14:return y=e.v,e.a(2,{success:!0,appliedFilters:n,products:y.products||[]});case 15:v=0,m=Object.entries(r);case 16:if(!(v<m.length)){e.n=26;break}if(b=a(m[v],2),g=b[0],k=b[1],this.selectors.filters.checkboxFilters[g]){e.n=17;break}return e.a(3,25);case 17:if("priceMax"!==g&&"priceMin"!==g){e.n=18;break}w="priceMax"===g?this.selectors.filters.priceInputs.max:this.selectors.filters.priceInputs.min,(S=document.querySelector(w))&&(S.value=k,S.dispatchEvent(new Event("change",{bubbles:!0})),n.push({type:g,value:k})),e.n=25;break;case 18:x=document.querySelectorAll('input[name^="filter."]'),_=o(x),e.p=19,_.s();case 20:if((j=_.n()).done){e.n=22;break}if(O=j.value,C=O.value.toLowerCase(),P=k.toString().toLowerCase(),!(C===P||null!==(q=O.parentElement)&&void 0!==q&&null!==(q=q.textContent)&&void 0!==q&&q.toLowerCase().includes(P))){e.n=21;break}return O.checked=!0,O.dispatchEvent(new Event("change",{bubbles:!0})),n.push({type:g,value:k}),e.a(3,22);case 21:e.n=20;break;case 22:e.n=24;break;case 23:e.p=23,I=e.v,_.e(I);case 24:return e.p=24,_.f(),e.f(24);case 25:v++,e.n=16;break;case 26:return e.a(2,{success:!0,appliedFilters:n,products:[]});case 27:e.n=29;break;case 28:return e.p=28,E=e.v,e.a(2,{success:!1,appliedFilters:[],products:[],error:E.message});case 29:return e.a(2)}},e,this,[[19,23,24,25],[0,28]])})),function(e){return v.apply(this,arguments)})},{key:"extractProducts",value:(y=p(s().m(function e(){var t,r,n,o,a=this;return s().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,!this.page){e.n=2;break}return e.n=1,this.page.evaluate(function(e){var t=document.querySelectorAll(e.products.item);return Array.from(t).map(function(t,r){var n,o,a=t.querySelector(e.products.title),i=t.querySelector(e.products.price),c=t.querySelector(e.products.image),s=t.querySelector(e.products.link),u=t.querySelector(e.products.soldOut),l="";if(i){var p=i.textContent.match(/\$[\d,]+\.?\d*/);l=p?p[0]:i.textContent.trim()}return{id:"product-".concat(r),title:(null==a||null===(n=a.textContent)||void 0===n?void 0:n.trim())||"",price:l,image:(null==c?void 0:c.src)||(null==c||null===(o=c.dataset)||void 0===o?void 0:o.src)||"",link:(null==s?void 0:s.href)||"",available:!u||-1===u.textContent.toLowerCase().indexOf("sold out")}}).filter(function(e){return e.title})},this.selectors);case 1:return t=e.v,e.a(2,{success:!0,products:t});case 2:return r=document.querySelectorAll(this.selectors.products.item),n=Array.from(r).map(function(e,t){var r,n,o=e.querySelector(a.selectors.products.title),i=e.querySelector(a.selectors.products.price),c=e.querySelector(a.selectors.products.image),s=e.querySelector(a.selectors.products.link),u=e.querySelector(a.selectors.products.soldOut),l="";if(i){var p=i.textContent.match(/\$[\d,]+\.?\d*/);l=p?p[0]:i.textContent.trim()}return{id:"product-".concat(t),title:(null==o||null===(r=o.textContent)||void 0===r?void 0:r.trim())||"",price:l,image:(null==c?void 0:c.src)||(null==c||null===(n=c.dataset)||void 0===n?void 0:n.src)||"",link:(null==s?void 0:s.href)||"",available:!u||-1===u.textContent.toLowerCase().indexOf("sold out")}}).filter(function(e){return e.title}),e.a(2,{success:!0,products:n});case 3:e.n=5;break;case 4:return e.p=4,o=e.v,e.a(2,{success:!1,products:[],error:o.message});case 5:return e.a(2)}},e,this,[[0,4]])})),function(){return y.apply(this,arguments)})},{key:"addToCart",value:(f=p(s().m(function e(t){var r;return s().w(function(e){for(;;)switch(e.n){case 0:if(e.p=1,t.link){e.n=2;break}return e.a(2,{success:!1,message:"Product link not available"});case 2:if(!this.page){e.n=9;break}return e.n=3,this.page.goto(t.link);case 3:return e.n=4,this.page.waitForSelector(this.selectors.cart.addButton,{timeout:5e3});case 4:return e.n=5,this.page.evaluate(function(e){var t=document.querySelector(e);return t&&!t.textContent.toLowerCase().includes("sold out")},this.selectors.cart.addButton);case 5:if(e.v){e.n=6;break}return e.a(2,{success:!1,message:"Product is sold out"});case 6:return e.n=7,this.page.click(this.selectors.cart.addButton);case 7:return e.n=8,this.page.waitForTimeout(2e3);case 8:return e.a(2,{success:!0,message:"Product added to cart"});case 9:return e.a(2,{success:!1,message:"Cart functionality requires browser context"});case 10:e.n=12;break;case 11:return e.p=11,r=e.v,e.a(2,{success:!1,message:r.message});case 12:return e.a(2)}},e,this,[[1,11]])})),function(e){return f.apply(this,arguments)})},{key:"waitForPageLoad",value:(l=p(s().m(function e(){return s().w(function(e){for(;;)switch(e.n){case 0:if(!this.page){e.n=4;break}return e.p=1,e.n=2,this.page.waitForLoadState("networkidle",{timeout:1e4});case 2:e.n=4;break;case 3:return e.p=3,e.v,e.n=4,this.page.waitForTimeout(2e3);case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return l.apply(this,arguments)})},{key:"getAvailableFilters",value:(u=p(s().m(function e(){var t;return s().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,t={sizes:[],colors:[],vendors:[],productTypes:[],tags:[],availability:[],priceRange:{min:0,max:500}},!this.page){e.n=2;break}return e.n=1,this.page.evaluate(function(e){var t,r,n={sizes:[],colors:[],vendors:[],productTypes:[],tags:[],availability:[],priceRange:{min:0,max:500}};document.querySelectorAll('input[name^="filter."]').forEach(function(e){var t,r=e.name,o=e.value,a=(null===(t=e.parentElement)||void 0===t||null===(t=t.textContent)||void 0===t?void 0:t.trim())||o;r.includes("size")?n.sizes.push(a):r.includes("color")?n.colors.push(a):r.includes("vendor")?n.vendors.push(a):r.includes("product_type")?n.productTypes.push(a):r.includes("tag")?n.tags.push(a):r.includes("availability")&&n.availability.push(a)});var o=document.querySelector(null===(t=e.filters.priceInputs)||void 0===t?void 0:t.min),a=document.querySelector(null===(r=e.filters.priceInputs)||void 0===r?void 0:r.max);return o&&(n.priceRange.min=parseInt(o.min||0)),a&&(n.priceRange.max=parseInt(a.max||500)),n},this.selectors);case 1:return e.a(2,e.v);case 2:return document.querySelectorAll('input[name^="filter."]').forEach(function(e){var r,n=e.name,o=e.value,a=(null===(r=e.parentElement)||void 0===r||null===(r=r.textContent)||void 0===r?void 0:r.trim())||o;n.includes("size")&&!t.sizes.includes(a)?t.sizes.push(a):n.includes("color")&&!t.colors.includes(a)?t.colors.push(a):n.includes("vendor")&&!t.vendors.includes(a)?t.vendors.push(a):n.includes("product_type")&&!t.productTypes.includes(a)?t.productTypes.push(a):n.includes("tag")&&!t.tags.includes(a)?t.tags.push(a):n.includes("availability")&&!t.availability.includes(a)&&t.availability.push(a)}),e.a(2,t);case 3:e.n=5;break;case 4:return e.p=4,e.v,e.a(2,{sizes:[],colors:[],vendors:[],productTypes:[],tags:[],availability:[],priceRange:{min:0,max:500}});case 5:return e.a(2)}},e,this,[[0,4]])})),function(){return u.apply(this,arguments)})},{key:"parseNaturalLanguageFilters",value:function(e){var t={},r=e.toLowerCase(),n=r.match(/size\s+(\S+)/);n&&(t.size=n[1].toUpperCase());for(var o=0,a=["red","blue","green","black","white","yellow","orange","purple","pink","gray","grey"];o<a.length;o++){var i=a[o];if(r.includes(i)){t.color=i;break}}var c=r.match(/under\s+\$?(\d+)/);c&&(t.priceMax=parseInt(c[1]));var s=r.match(/\$?(\d+)\s*-\s*\$?(\d+)/);return s&&(t.priceMin=parseInt(s[1]),t.priceMax=parseInt(s[2])),t}},{key:"getMCPCapabilities",value:function(){return{tools:[{name:"search_products",description:"Search for products on online-sports-shop.co.uk",inputSchema:{type:"object",properties:{query:{type:"string",description:"Search query for products"}},required:["query"]}},{name:"filter_products",description:"Filter products by various criteria",inputSchema:{type:"object",properties:{filters:{type:"string",description:'Natural language filter query (e.g., "size M blue under $50") or specific filters'}},required:["filters"]}},{name:"get_page_products",description:"Get all products currently displayed on the page",inputSchema:{type:"object",properties:{}}},{name:"add_to_cart",description:"Add a product to the shopping cart",inputSchema:{type:"object",properties:{product:{type:"object",description:"Product object with link property"},quantity:{type:"number",description:"Quantity to add (default: 1)"}},required:["product"]}}]}}},{key:"callMCPTool",value:(c=p(s().m(function e(t,r){var n;return s().w(function(e){for(;;)switch(e.n){case 0:n=t,e.n="search_products"===n?1:"filter_products"===n?3:"get_page_products"===n?5:"add_to_cart"===n?7:9;break;case 1:return e.n=2,this.search(r.query);case 2:case 4:case 6:case 8:return e.a(2,e.v);case 3:return e.n=4,this.applyFilters(r.filters);case 5:return e.n=6,this.extractProducts();case 7:return e.n=8,this.addToCart(r.product,{quantity:r.quantity||1});case 9:return e.a(2,{success:!1,error:"Unknown tool: ".concat(t)});case 10:return e.a(2)}},e,this)})),function(e,t){return c.apply(this,arguments)})}],n&&d(r.prototype,n),i&&d(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i,c,u,l,f,y,v,b}(r(264).an)}}]);