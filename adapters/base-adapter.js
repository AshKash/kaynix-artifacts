export class BaseSiteAdapter{constructor(e,t={}){this.domain=e,this.config=t,this.debug=t.debug}getDomain(){return this.domain}async search(e,t={}){throw new Error("search() must be implemented by site adapter")}async extractProducts(e={}){throw new Error("extractProducts() must be implemented by site adapter")}async applyFilters(e={}){throw new Error("applyFilters() must be implemented by site adapter")}async addToCart(e,t={}){throw new Error("addToCart() must be implemented by site adapter")}async waitForPageLoad(e=5e3){throw new Error("waitForPageLoad() must be implemented by site adapter")}detectPageType(){const e=window.location.pathname.toLowerCase(),t=window.location.search.toLowerCase();return e.includes("/product")||e.includes("/p/")?"product":e.includes("/search")||t.includes("q=")?"search":e.includes("/category")||e.includes("/c/")?"category":"/"===e||""===e?"home":e.includes("/cart")?"cart":"other"}getPageContext(){return{url:window.location.href,pathname:window.location.pathname,search:window.location.search,title:document.title,type:this.detectPageType(),domain:this.domain}}async waitForSelector(e,t=5e3){const r=Date.now();for(;Date.now()-r<t;){const t=document.querySelector(e);if(t&&null!==t.offsetParent)return t;await new Promise(e=>setTimeout(e,100))}throw new Error(`Timeout waiting for selector: ${e}`)}async waitForAnySelector(e,t=5e3){const r=Array.isArray(e)?e:[e],o=Date.now();for(;Date.now()-o<t;){for(const e of r){const t=document.querySelector(e);if(t&&null!==t.offsetParent)return{element:t,selector:e}}await new Promise(e=>setTimeout(e,100))}throw new Error(`Timeout waiting for any selector: ${r.join(", ")}`)}async waitForElement(e,t=5e3){return this.waitForSelector(e,t)}async safeClick(e,t={}){if(!e)throw new Error("No element to click");if(e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),await new Promise(e=>setTimeout(e,t.scrollDelay||300)),null===e.offsetParent)throw new Error("Element is not visible");e.click(),t.waitAfter&&await new Promise(e=>setTimeout(e,t.waitAfter))}async typeText(e,t,r={}){if(!e)throw new Error("No element to type into");const{clearFirst:o=!0,delay:n=50,triggerEvents:i=!0}=r;e.focus(),o&&(e.value="",i&&e.dispatchEvent(new Event("input",{bubbles:!0})));for(const a of t)e.value+=a,i&&e.dispatchEvent(new Event("input",{bubbles:!0})),n>0&&await new Promise(e=>setTimeout(e,n));i&&(e.dispatchEvent(new Event("change",{bubbles:!0})),e.dispatchEvent(new KeyboardEvent("keydown",{key:"Enter",code:"Enter",bubbles:!0})))}extractText(e){return e&&(e.textContent&&e.textContent.trim()||e.innerText&&e.innerText.trim())||""}extractPrice(e){if(!e)return null;const t=e.replace(/[^\d.,]/g,"").match(/(\d+(?:[.,]\d{2})?)/);return t?parseFloat(t[1].replace(",","")):null}detectPageType(){const e=window.location.href.toLowerCase(),t=window.location.pathname.toLowerCase();return e.includes("/search")||e.includes("?q=")||e.includes("&q=")?"search":e.includes("/product/")||e.includes("/products/")?"product":"/"===t||""===t?"home":e.includes("/category/")||e.includes("/collection/")?"category":e.includes("/cart")?"cart":e.includes("/checkout")?"checkout":"unknown"}log(...e){this.debug}error(...e){}warn(...e){}getMCPCapabilities(){return{tools:[]}}async callMCPTool(e,t){throw new Error(`MCP tool "${e}" not implemented by ${this.domain} adapter`)}}export const STANDARD_MCP_TOOLS=[{name:"search_products",description:"Search for products on the e-commerce site",inputSchema:{type:"object",properties:{query:{type:"string",description:"Search query"},filters:{type:"object",description:"Optional filters"}},required:["query"]}},{name:"apply_filters",description:"Apply filters to product listing",inputSchema:{type:"object",properties:{filters:{type:"object",description:"Filters to apply"}},required:["filters"]}},{name:"get_page_products",description:"Extract products from current page",inputSchema:{type:"object",properties:{}}},{name:"add_to_cart",description:"Add product to shopping cart",inputSchema:{type:"object",properties:{productId:{type:"string",description:"Product identifier"},size:{type:"string",description:"Product size"},quantity:{type:"number",description:"Quantity to add"}},required:["productId"]}}];export class MCPResponse{constructor(e,t,r=null,o=null){this.success=e,this.message=t,this.data=r,this.debug=o}}export class ProductJsonLD{constructor(e){this["@context"]="https://schema.org/",this["@type"]="Product",this.name=e.name||e.title,this.url=e.url,this.image=e.image,this.description=e.description,this.brand=e.brand?{"@type":"Brand",name:e.brand}:void 0,this.offers={"@type":"Offer",price:e.price,priceCurrency:e.currency||"USD",availability:e.inStock?"https://schema.org/InStock":"https://schema.org/OutOfStock"},this.aggregateRating=e.rating?{"@type":"AggregateRating",ratingValue:e.rating,reviewCount:e.reviewCount}:void 0}}export default BaseSiteAdapter;