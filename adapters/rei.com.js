import{BaseSiteAdapter}from"./base-adapter.js";export class REIAdapter extends BaseSiteAdapter{constructor(t={}){super("rei.com",t)}async extractProducts(t={}){this.log("Extracting products from rei.com...");const r=[],e=document.querySelectorAll("li[data-cnstrc-item-id]");this.log(`Found ${e.length} product elements`);for(const i of e)try{const t={},e=i.querySelector('[data-ui="product-brand"]'),c=i.querySelector('[data-ui="product-title"]'),o=e?e.textContent.trim():"",s=c?c.textContent.trim():"";t.title=o&&s?`${o} ${s}`:s||o||null;const l=i.querySelector('a[href^="/product/"]');l&&(t.url=l.href.startsWith("http")?l.href:`https://www.rei.com${l.getAttribute("href")}`);const u=i.querySelector('[data-ui="full-price"]');if(u){const r=u.textContent.trim();t.price=this.extractPrice(r)}const a=i.querySelector('img[src*="/media/"]');t.imageUrl=a?a.src:null,t.title&&t.price&&t.url?r.push(t):this.log("Skipping product with missing fields:",{title:t.title,price:t.price,url:t.url})}catch(c){this.error("Error extracting product:",c)}return this.log(`Extracted ${r.length} products`),{products:r}}}export default REIAdapter;